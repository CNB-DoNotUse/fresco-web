<!-- Props -->
<% if(typeof(props) !== 'undefined'){ %>
  <script type="text/javascript">window.__initialProps__ =  <%- props %></script>
<% } %>

<!--Global Specifc based on sections-->
<% if(typeof(section) !== 'undefined'){ %> 
  <script type="text/javascript" src="/js/<%= section %>.js"></script>
  
  <% if(section == 'platform'){ %>
    <script type="text/javascript" src="/js/pages/common.js"></script>
    
    <!--Material Init-->
    <script type="text/javascript">
        $.material.init();
    </script>

    <!--Session Ping Check-->
    <script type="text/javascript">
        (function(){
          var _xhr = null;
          window.setInterval(function() {
            if(_xhr) {
              _xhr.abort();
              _xhr = null;
            }
            _xhr = $.ajax({
              url: '/api/ping',
              method: 'get',
              success: (result, status, xhr) => {
              },
              error: (xhr, status, error) => {
                if(xhr.status == 401) {
                  return location.reload();
                }
              }
            });
          }, 15000);
        })();
    </script>

    <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?libraries=geometry,places"></script>

  <% } else if(typeof(page) !== 'undefined' && page == 'publicGallery'){ %>  
    <script type="text/javascript" src="/js/pages/common.js"></script>
  <% } %> %>
<% } %>

<!--Remote Scripts-->
<% if(typeof remoteScripts !== 'undefined') { %>
    <% for(var i in remoteScripts) { %>
      <script type="text/javascript" src="<%= remoteScripts[i] %>"></script>
    <% } %>
<% } %>

<!--Page Specifc-->
<% if(typeof(page) !== 'undefined'){ %> 
    <script type="text/javascript" src="/js/pages/<%= page %>.js"></script>
<% } %> 

<!--Alerts-->
<script type="text/javascript">
<% for(var i=0; i < alerts.length; i++) {%>    
    $(document).ready(function(){
        $.snackbar({ 
            content: "<%- alerts[i] %>", 
            timeout: 5000, 
            htmlAllowed: true
        });
    });
<% } %>
</script>

<!--GA-->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-58884254-1', 'auto');
  <% if(typeof user !== 'undefined'){ %>
  ga('set', 'dimension1', <%- user ? '"TRUE"' : '"FALSE"' %>);
  <% } %>
  ga('send', 'pageview');
</script>

</body>

</html>